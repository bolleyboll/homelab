---
crds:
  enabled: true

alertmanager:
  ingress:
    enabled: true
    ingressClassName: "nginx"
    hosts:
      - alertmanager.lan

grafana:
  ingress:
    enabled: true
    ingressClassName: "nginx"
    hosts:
      - grafana.lan

kubeProxy:
  enabled: false

nodeExporter:
  enabled: false

prometheus:
  prometheusSpec:
    retention: 7d
    serviceMonitorSelectorNilUsesHelmValues: false
    additionalScrapeConfigs:
      - job_name: "dockerswarm"
        dockerswarm_sd_configs:
          - host: "tcp://192.168.2.101:2375"
            role: nodes
        relabel_configs:
          # Fetch metrics on port 9323.
          - source_labels: [__meta_dockerswarm_node_address]
            target_label: __address__
            replacement: $1:9323
          # Set hostname as instance label
          - source_labels: [__meta_dockerswarm_node_hostname]
            target_label: instance
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi

  ingress:
    enabled: true
    ingressClassName: "nginx"
    hosts:
      - prometheus.lan
